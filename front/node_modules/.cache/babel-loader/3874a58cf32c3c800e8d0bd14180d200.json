{"ast":null,"code":"import _objectSpread from \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/src/Components/Visitor.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { apiEndPoint } from '../config';\nimport './css/Visitor.css';\nimport axios from 'axios';\n\nconst Visitor = () => {\n  /* -------------------GET CATEGORIES FROM API------------------*/\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        category = _useState2[0],\n        setCategory = _useState2[1];\n\n  useEffect(() => {\n    axios.get(`${apiEndPoint}/category/`).then(result => {\n      setCategory(result.data);\n    });\n  }, []);\n  /* -------------------POST ON API------------------*/\n\n  const _useState3 = useState({\n    category: '',\n    title: '',\n    date: undefined,\n    picture: null\n  }),\n        _useState4 = _slicedToArray(_useState3, 2),\n        form = _useState4[0],\n        setForm = _useState4[1];\n\n  const submitForm = () => {\n    const formData = new FormData();\n    formData.append('category_id', form.category);\n    formData.append('title', form.title);\n    formData.append('date', form.date);\n    formData.append('picture_name', form.picture);\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    axios.post(`${apiEndPoint}/gallery`, formData, config).then(() => {\n      console.log(form);\n    }).catch(error => {\n      if (error) {\n        console.log('pas ok');\n      }\n    });\n  };\n\n  useEffect(() => {\n    console.log(form);\n  }, [form]);\n  return React.createElement(\"div\", {\n    id: \"visitor\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Your experience of Wild Circus\"), React.createElement(\"form\", {\n    id: \"form\",\n    runat: \"server\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    onChange: event => setForm(_objectSpread({}, form, {\n      category: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Category's picture\"), category.map(category => React.createElement(\"option\", {\n    value: category.id,\n    key: category.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, category.name)), \";\"), React.createElement(\"input\", {\n    placeholder: \"Picture's title\",\n    onChange: event => setForm(_objectSpread({}, form, {\n      title: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    placeholder: \"Picture's date\",\n    onChange: event => setForm(_objectSpread({}, form, {\n      date: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    onChange: event => setForm(_objectSpread({}, form, {\n      picture: event.target.files[0]\n    })),\n    type: \"file\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: submitForm,\n    id: \"button_register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"Envoyer le formulaire\")));\n};\n\nexport default Visitor;","map":{"version":3,"sources":["/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/src/Components/Visitor.jsx"],"names":["React","useEffect","useState","apiEndPoint","axios","Visitor","category","setCategory","get","then","result","data","title","date","undefined","picture","form","setForm","submitForm","formData","FormData","append","config","headers","post","console","log","catch","error","event","target","value","map","id","name","files"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimportÂ { apiEndPoint } from '../config';\nimport './css/Visitor.css';\nimport axios from 'axios';\n\nconst Visitor = () => {\n\n  /* -------------------GET CATEGORIES FROM API------------------*/\n\n  const [category, setCategory] = useState([]);\n\n  useEffect(() => {\n    axios.get(`${apiEndPoint}/category/`)\n      .then((result) => {\n        setCategory(result.data);\n      });\n  }, []);\n  \n  /* -------------------POST ON API------------------*/\n\n  const [form, setForm] = useState({\n    category: '',\n    title: '',\n    date: undefined,\n    picture: null,\n  });\n\n  const submitForm = () => {\n    const formData = new FormData();\n\n    formData.append('category_id', form.category);\n    formData.append('title', form.title);\n    formData.append('date', form.date);\n    formData.append('picture_name', form.picture);\n\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data',\n      },\n    };\n\n    axios.post(`${apiEndPoint}/gallery`, formData, config)\n      .then(() => {\n        console.log(form);\n      })\n      .catch((error) => {\n        if (error) {\n          console.log('pas ok')\n        }\n      });\n  };\n\n  useEffect(() => {\n    console.log(form);\n  }, [form]);\n\n\n return (\n   <div id=\"visitor\">\n     <h1>Your experience of Wild Circus</h1>\n     <form id=\"form\" runat=\"server\">\n      <select\n        onChange={(event) => setForm({ ...form, category: event.target.value })}\n      >\n        <option>Category's picture</option>\n        {category.map((category) => (\n          <option value={category.id} key={category.name}>{category.name}</option>\n        ))}\n        ;\n      </select>\n      <input\n        placeholder=\"Picture's title\"\n        onChange={(event) => setForm({ ...form, title: event.target.value })}>\n      </input>\n      <input\n        placeholder=\"Picture's date\"\n        onChange={(event) => setForm({ ...form, date: event.target.value })}>\n      </input>\n      <input\n        onChange={(event) => setForm({ ...form, picture: event.target.files[0] })}\n        type=\"file\">\n      </input>\n      <button\n        type=\"submit\"\n        onClick={submitForm}\n        id=\"button_register\"\n      >\n        Envoyer le formulaire\n      </button>\n     </form>\n   </div>\n )\n}\n\nexport default Visitor;"]},"metadata":{},"sourceType":"module"}