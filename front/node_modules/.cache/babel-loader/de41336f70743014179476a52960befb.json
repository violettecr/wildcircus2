{"ast":null,"code":"import _slicedToArray from \"/home/violette/Bureau/projet3/FRONT_TRAVAIL_nantes-0919-js-CGouestre-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/violette/Bureau/projet3/FRONT_TRAVAIL_nantes-0919-js-CGouestre-front/src/Components/Admin/AdminPage.jsx\";\nimport React, { Fragment, useContext, useEffect, useState } from 'react';\nimport '../css/AdminPage.css';\nimport Navbar from '../Navbar/Navbar';\nimport { apiEndPoint } from '../../config';\nimport { CtxAdverts } from '../CtxAdverts';\nimport CtxAdmin from '../CtxAdmin';\nimport { Redirect, Link } from 'react-router-dom';\nimport axios from 'axios';\n\nconst AdminPage = () => {\n  const _useContext = useContext(CtxAdverts),\n        _useContext2 = _slicedToArray(_useContext, 2),\n        adverts = _useContext2[0],\n        setAverts = _useContext2[1];\n\n  const _useContext3 = useContext(CtxAdmin),\n        _useContext4 = _slicedToArray(_useContext3, 2),\n        admin = _useContext4[0],\n        setAdmin = _useContext4[1];\n\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        id = _useState2[0],\n        setId = _useState2[1];\n\n  const disconnect = () => {\n    localStorage.removeItem('token');\n    window.location.reload(false);\n  };\n\n  const handleInput = e => {\n    setId(e.target.value);\n  };\n\n  const deleteAdvert = id => {\n    axios.delete(`${apiEndPoint}/advert/${id}`).then(res => setAverts(res.data));\n  };\n\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, !admin.name && React.createElement(Redirect, {\n    to: \"/adminLogin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }), React.createElement(Navbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"adminPage\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"Admin : \", admin.name), React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, \" Num\\xE9ro de l'annonce:\", React.createElement(\"input\", {\n    onChange: handleInput,\n    type: \"text\",\n    name: \"Num\\xE9ro de l'annonce\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }))), adverts.filter(advert => {\n    if (id.length > 0) {\n      return advert.id === parseInt(id);\n    } else {\n      return advert;\n    }\n  }).map(advert => {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => deleteAdvert(advert.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, \"supprimer\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, advert.id), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, advert.title), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, advert.description));\n  }), React.createElement(\"button\", {\n    onClick: disconnect,\n    id: \"disconect\",\n    type: \"button\",\n    className: \"btn btn-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/adminLogin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, \"Deconnexion\")));\n};\n\nexport default AdminPage;","map":{"version":3,"sources":["/home/violette/Bureau/projet3/FRONT_TRAVAIL_nantes-0919-js-CGouestre-front/src/Components/Admin/AdminPage.jsx"],"names":["React","Fragment","useContext","useEffect","useState","Navbar","apiEndPoint","CtxAdverts","CtxAdmin","Redirect","Link","axios","AdminPage","adverts","setAverts","admin","setAdmin","id","setId","disconnect","localStorage","removeItem","window","location","reload","handleInput","e","target","value","deleteAdvert","delete","then","res","data","name","filter","advert","length","parseInt","map","title","description"],"mappings":"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","sourcesContent":["import React, {Fragment, useContext, useEffect, useState } from 'react';\nimport '../css/AdminPage.css';\nimport Navbar from '../Navbar/Navbar';\nimport { apiEndPoint } from '../../config';\nimport { CtxAdverts } from '../CtxAdverts';\nimport CtxAdmin from '../CtxAdmin';\nimport {Redirect, Link} from 'react-router-dom';\nimport axios from 'axios';\n\nconst AdminPage = () => {\nconst [adverts, setAverts] = useContext(CtxAdverts);\nconst [admin, setAdmin] = useContext(CtxAdmin);\nconst [id, setId] = useState(\"\");\n\n  const disconnect = () => {\n    localStorage.removeItem('token');\n    window.location.reload(false);\n  }\n\n  const handleInput= (e) => {\n    setId(e.target.value)\n  }\n\n  const deleteAdvert = id => {\n    axios.delete(`${apiEndPoint}/advert/${id}`)\n    .then(res => setAverts(res.data))\n  }\n  \n\treturn (\n    <Fragment>\n      {!admin.name && <Redirect to='/adminLogin'/>}\n      <Navbar/>\n      <div id=\"adminPage\">\n        <p>Admin : {admin.name}</p>\n        <label> Numéro de l'annonce:\n          <input onChange={handleInput} type=\"text\" name=\"Numéro de l'annonce\" />\n        </label>\n      </div>\n      {adverts.filter((advert) => {\n        if ( id.length >0 ){\n          return advert.id === parseInt(id)\n        }else{\n          return advert\n        }        \n      })\n        .map((advert) => {\n        return(\n          <div>    \n            <button onClick={() => deleteAdvert(advert.id)}>supprimer</button>      \n            <p>{advert.id}</p>\n            <p>{advert.title}</p>\n            <p>{advert.description}</p> \n          </div>\n      )})}\n      <button onClick={disconnect} id=\"disconect\" type=\"button\" className=\"btn btn-primary\">\n        <Link to=\"/adminLogin\">\n          Deconnexion\n          </Link>\n          </button>      \n    </Fragment>\n  );\n}\n\nexport default AdminPage;\n"]},"metadata":{},"sourceType":"module"}