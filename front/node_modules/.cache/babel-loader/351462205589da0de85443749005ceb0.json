{"ast":null,"code":"import _objectSpread from \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/src/Components/Visitor.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { apiEndPoint } from '../config';\nimport './css/Visitor.css';\nimport axios from 'axios';\n\nconst Visitor = () => {\n  /* -------------------POST ON API------------------*/\n  const _useState = useState({\n    category: '',\n    title: '',\n    date: undefined,\n    picture: null\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        form = _useState2[0],\n        setForm = _useState2[1];\n\n  const submitForm = () => {\n    const formData = new FormData();\n    formData.append('category_id', form.category);\n    formData.append('title', form.title);\n    formData.append('date', form.date);\n    formData.append('picture', form.picture_name);\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    axios.post(`${apiEndPoint}/advert`, formData, config).then(() => {\n      console.log(form);\n    }).catch(error => {\n      if (error) {\n        console.log('pas ok');\n      }\n    });\n  };\n\n  useEffect(() => {\n    console.log(form);\n  }, [form]);\n  /* -------------------GET CATEGORY FROM API------------------*/\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        category = _useState4[0],\n        setCategory = _useState4[1];\n\n  useEffect(() => {\n    axios.get(`${apiEndPoint}/category/`).then(result => {\n      setCategory(result.data);\n    });\n  }, []);\n  return React.createElement(\"div\", {\n    id: \"visitor\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"Your experience of Wild Circus\"), React.createElement(\"form\", {\n    id: \"form\",\n    runat: \"server\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    onChange: event => setForm(_objectSpread({}, form, {\n      category: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Category's picture\"), category.map(category => React.createElement(\"option\", {\n    value: category.id,\n    key: category.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, category.name)), \";\"), React.createElement(\"input\", {\n    placeholder: \"Picture's title\",\n    onChange: event => setForm(_objectSpread({}, form, {\n      title: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    placeholder: \"Picture's date\",\n    onChange: event => setForm(_objectSpread({}, form, {\n      date: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \">\"), React.createElement(\"input\", {\n    onChange: event => setForm(_objectSpread({}, form, {\n      picture: event.target.files[0]\n    })),\n    type: \"file\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  })));\n};\n\nexport default Visitor;","map":{"version":3,"sources":["/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/src/Components/Visitor.jsx"],"names":["React","useEffect","useState","apiEndPoint","axios","Visitor","category","title","date","undefined","picture","form","setForm","submitForm","formData","FormData","append","picture_name","config","headers","post","then","console","log","catch","error","setCategory","get","result","data","event","target","value","map","id","name","files"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimportÂ { apiEndPoint } from '../config';\nimport './css/Visitor.css';\nimport axios from 'axios';\n\nconst Visitor = () => {\n\n\n  /* -------------------POST ON API------------------*/\n\n  const [form, setForm] = useState({\n    category: '',\n    title: '',\n    date: undefined,\n    picture: null,\n  });\n\n  const submitForm = () => {\n    const formData = new FormData();\n\n    formData.append('category_id', form.category);\n    formData.append('title', form.title);\n    formData.append('date', form.date);\n    formData.append('picture', form.picture_name);\n\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data',\n      },\n    };\n\n    axios.post(`${apiEndPoint}/advert`, formData, config)\n      .then(() => {\n        console.log(form);\n      })\n      .catch((error) => {\n        if (error) {\n          console.log('pas ok')\n        }\n      });\n  };\n\n  useEffect(() => {\n    console.log(form);\n  }, [form]);\n\n  /* -------------------GET CATEGORY FROM API------------------*/\n\n  const [category, setCategory] = useState([]);\n\n  useEffect(() => {\n    axios.get(`${apiEndPoint}/category/`)\n      .then((result) => {\n        setCategory(result.data);\n      });\n  }, []);\n\n\n return (\n   <div id=\"visitor\">\n     <h1>Your experience of Wild Circus</h1>\n     <form id=\"form\" runat=\"server\">\n      <select\n        onChange={(event) => setForm({ ...form, category: event.target.value })}\n      >\n        <option>Category's picture</option>\n        {category.map((category) => (\n          <option value={category.id} key={category.name}>{category.name}</option>\n        ))}\n        ;\n      </select>\n      <input\n        placeholder=\"Picture's title\"\n        onChange={(event) => setForm({ ...form, title: event.target.value })}>\n      </input>\n      <input\n        placeholder=\"Picture's date\"\n        onChange={(event) => setForm({ ...form, date: event.target.value })}>\n      >\n      </input>\n      <input\n        onChange={(event) => setForm({ ...form, picture: event.target.files[0] })}\n        type=\"file\">\n      </input>\n     </form>\n   </div>\n )\n}\n\nexport default Visitor;"]},"metadata":{},"sourceType":"module"}