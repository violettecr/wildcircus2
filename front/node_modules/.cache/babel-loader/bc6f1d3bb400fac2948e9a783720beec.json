{"ast":null,"code":"import _objectSpread from \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/src/Components/Visitor.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { apiEndPoint } from '../config';\nimport './css/Visitor.css';\nimport axios from 'axios';\n\nconst Visitor = () => {\n  /* -------------------POST ON API------------------*/\n  const _useState = useState({\n    category: '',\n    title: '',\n    date: undefined,\n    picture: null\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        form = _useState2[0],\n        setForm = _useState2[1];\n\n  const submitForm = () => {\n    const formData = new FormData();\n    formData.append('category_id', form.category);\n    formData.append('title', form.title);\n    formData.append('date', form.date);\n    formData.append('picture_name', form.picture);\n    axios.post(`${apiEndPoint}/gallery`, formData, config).then(() => {\n      console.log(form);\n    }).catch(error => {\n      if (error) {\n        console.log('pas ok');\n      }\n    });\n  };\n\n  useEffect(() => {\n    console.log(form);\n  }, [form]);\n  /* -------------------GET CATEGORY FROM API------------------*/\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        category = _useState4[0],\n        setCategory = _useState4[1];\n\n  useEffect(() => {\n    axios.get(`${apiEndPoint}/category/`).then(result => {\n      setCategory(result.data);\n    });\n  }, []);\n  return React.createElement(\"div\", {\n    id: \"visitor\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"Your experience of Wild Circus\"), React.createElement(\"form\", {\n    id: \"form\",\n    runat: \"server\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    onChange: event => setForm(_objectSpread({}, form, {\n      category: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Category's picture\"), category.map(category => React.createElement(\"option\", {\n    value: category.id,\n    key: category.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, category.name)), \";\"), React.createElement(\"input\", {\n    placeholder: \"Picture's title\",\n    onChange: event => setForm(_objectSpread({}, form, {\n      title: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    placeholder: \"Picture's date\",\n    onChange: event => setForm(_objectSpread({}, form, {\n      date: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    onChange: event => setForm(_objectSpread({}, form, {\n      picture: event.target.files[0]\n    })),\n    type: \"file\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: submitForm,\n    id: \"button_register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Envoyer le formulaire\")));\n};\n\nexport default Visitor;","map":{"version":3,"sources":["/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/src/Components/Visitor.jsx"],"names":["React","useEffect","useState","apiEndPoint","axios","Visitor","category","title","date","undefined","picture","form","setForm","submitForm","formData","FormData","append","post","config","then","console","log","catch","error","setCategory","get","result","data","event","target","value","map","id","name","files"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimportÂ { apiEndPoint } from '../config';\nimport './css/Visitor.css';\nimport axios from 'axios';\n\nconst Visitor = () => {\n\n\n  /* -------------------POST ON API------------------*/\n\n  const [form, setForm] = useState({\n    category: '',\n    title: '',\n    date: undefined,\n    picture: null,\n  });\n\n  const submitForm = () => {\n    const formData = new FormData();\n\n    formData.append('category_id', form.category);\n    formData.append('title', form.title);\n    formData.append('date', form.date);\n    formData.append('picture_name', form.picture);\n\n    axios.post(`${apiEndPoint}/gallery`, formData, config)\n      .then(() => {\n        console.log(form);\n      })\n      .catch((error) => {\n        if (error) {\n          console.log('pas ok')\n        }\n      });\n  };\n\n  useEffect(() => {\n    console.log(form);\n  }, [form]);\n\n  /* -------------------GET CATEGORY FROM API------------------*/\n\n  const [category, setCategory] = useState([]);\n\n  useEffect(() => {\n    axios.get(`${apiEndPoint}/category/`)\n      .then((result) => {\n        setCategory(result.data);\n      });\n  }, []);\n\n\n return (\n   <div id=\"visitor\">\n     <h1>Your experience of Wild Circus</h1>\n     <form id=\"form\" runat=\"server\">\n      <select\n        onChange={(event) => setForm({ ...form, category: event.target.value })}\n      >\n        <option>Category's picture</option>\n        {category.map((category) => (\n          <option value={category.id} key={category.name}>{category.name}</option>\n        ))}\n        ;\n      </select>\n      <input\n        placeholder=\"Picture's title\"\n        onChange={(event) => setForm({ ...form, title: event.target.value })}>\n      </input>\n      <input\n        placeholder=\"Picture's date\"\n        onChange={(event) => setForm({ ...form, date: event.target.value })}>\n      </input>\n      <input\n        onChange={(event) => setForm({ ...form, picture: event.target.files[0] })}\n        type=\"file\">\n      </input>\n      <button\n        type=\"submit\"\n        onClick={submitForm}\n        id=\"button_register\"\n      >\n        Envoyer le formulaire\n      </button>\n     </form>\n   </div>\n )\n}\n\nexport default Visitor;"]},"metadata":{},"sourceType":"module"}