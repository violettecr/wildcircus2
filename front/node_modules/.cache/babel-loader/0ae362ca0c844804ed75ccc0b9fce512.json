{"ast":null,"code":"import _objectSpread from \"/home/violette/Bureau/projet3/FRONT_COPIE_nantes-0919-js-CGouestre-front (copie)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/violette/Bureau/projet3/FRONT_COPIE_nantes-0919-js-CGouestre-front (copie)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/violette/Bureau/projet3/FRONT_COPIE_nantes-0919-js-CGouestre-front (copie)/src/Components/Admin/AdminLogin.jsx\";\nimport React, { Fragment, useState, useContext, useEffect } from 'react';\nimport '../css/AdminLogin.css';\nimport Navbar from '../Navbar/Navbar';\nimport { Link, Redirect } from 'react-router-dom';\nimport CtxAdmin from '../CtxAdmin';\nimport axios from 'axios';\nimport { apiEndPoint } from '../../config';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    '& > *': {\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      marginBottom: \"20px\"\n    }\n  }\n}));\n\nconst AdminLogin = () => {\n  const classes = useStyles();\n\n  const _useState = useState({\n    email: '',\n    password: ''\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        form = _useState2[0],\n        setForm = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        adminToken = _useState4[0],\n        setAdminToken = _useState4[1];\n\n  const _useContext = useContext(CtxAdmin),\n        _useContext2 = _slicedToArray(_useContext, 2),\n        admin = _useContext2[0],\n        setAdmin = _useContext2[1];\n\n  const submitForm = () => {\n    axios.post(`${apiEndPoint}/login/`, {\n      email: form.email,\n      password: form.password\n    }).then(result => {\n      if (result.status === 200) {\n        localStorage.setItem('token', result.data.token);\n        setAdmin(result.data.admin);\n        setAdminToken(result.data.adminToken);\n      }\n    });\n  };\n\n  return React.createElement(\"div\", {\n    id: \"background\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, admin.name && React.createElement(Redirect, {\n    to: \"/adminPage\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }), React.createElement(Navbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"adminLogin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \"Administrateur\"), React.createElement(\"form\", {\n    className: classes.root,\n    noValidate: true,\n    autoComplete: \"off\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    className: \"input\",\n    type: \"email\",\n    label: \"email\",\n    required: \"required\",\n    variant: \"outlined\",\n    value: form.email,\n    onChange: event => setForm(_objectSpread({}, form, {\n      email: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    className: \"input\",\n    type: \"password\",\n    label: \"mot de passe\",\n    required: \"required\",\n    variant: \"outlined\",\n    value: form.password,\n    onChange: event => setForm(_objectSpread({}, form, {\n      password: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    id: \"button\",\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    onClick: submitForm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \" Connexion \")));\n};\n\nexport default AdminLogin;","map":{"version":3,"sources":["/home/violette/Bureau/projet3/FRONT_COPIE_nantes-0919-js-CGouestre-front (copie)/src/Components/Admin/AdminLogin.jsx"],"names":["React","Fragment","useState","useContext","useEffect","Navbar","Link","Redirect","CtxAdmin","axios","apiEndPoint","makeStyles","TextField","useStyles","theme","root","width","display","flexDirection","marginBottom","AdminLogin","classes","email","password","form","setForm","adminToken","setAdminToken","admin","setAdmin","submitForm","post","then","result","status","localStorage","setItem","data","token","name","event","target","value"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useContext, useEffect } from 'react';\nimport '../css/AdminLogin.css';\nimport Navbar from '../Navbar/Navbar';\nimport { Link, Redirect } from 'react-router-dom';\nimport CtxAdmin from '../CtxAdmin';\nimport axios from 'axios';\nimportÂ { apiEndPoint } from '../../config';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& > *': {\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      marginBottom: \"20px\",\n    },\n  }\n}));\n\nconst AdminLogin = () => {\n  const classes = useStyles();\n  const [form, setForm] = useState({\n    email: '',\n    password: ''\n  });\n\n  const [adminToken, setAdminToken] = useState(null);\n  const [admin, setAdmin] = useContext(CtxAdmin);\n\n  const submitForm = () => {\n    axios.post(`${apiEndPoint}/login/`, {\n      email: form.email,\n      password: form.password\n    }).then(result => {\n      if (result.status === 200) {\n        localStorage.setItem('token', result.data.token);\n        setAdmin(result.data.admin);\n        setAdminToken(result.data.adminToken);\n      }\n    })\n  }\n\n  return (\n    <div id='background'>\n      {admin.name && <Redirect to='/adminPage'/>}  \n      <Navbar />\n      <div id='adminLogin'>\n        <h1>Administrateur</h1>\n        <form className={classes.root} noValidate autoComplete=\"off\">\n           <TextField\n            className=\"input\"\n            type=\"email\"\n            label=\"email\"\n            required=\"required\"\n            variant=\"outlined\"\n            value={form.email}\n            onChange={(event) => setForm({ ...form, email: event.target.value })}\n          />\n          <TextField\n            className=\"input\"\n            type=\"password\"\n            label=\"mot de passe\"\n            required=\"required\"\n            variant=\"outlined\"\n            value={form.password}\n            onChange={(event) => setForm({ ...form, password: event.target.value })}\n          />\n        </form>\n        <button id='button' type=\"submit\" className=\"btn btn-primary\" onClick={submitForm}> Connexion </button>\n      </div>\n    </div>\n  );\n}\n\nexport default AdminLogin;\n"]},"metadata":{},"sourceType":"module"}