{"ast":null,"code":"import _objectSpread from \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/src/Components/Visitor.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { apiEndPoint } from '../config';\nimport './css/Visitor.css';\nimport axios from 'axios';\nimport $ from 'jquery';\n\nconst Visitor = () => {\n  /* -------------------GET CATEGORIES FROM API------------------*/\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        category = _useState2[0],\n        setCategory = _useState2[1];\n\n  useEffect(() => {\n    axios.get(`${apiEndPoint}/category/`).then(result => {\n      setCategory(result.data);\n    });\n  }, []);\n  /* -------------------POST ON API------------------*/\n\n  const _useState3 = useState({\n    category: '',\n    title: '',\n    date: undefined,\n    picture: null\n  }),\n        _useState4 = _slicedToArray(_useState3, 2),\n        form = _useState4[0],\n        setForm = _useState4[1];\n\n  const submitForm = e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('category_id', form.category);\n    formData.append('title', form.title);\n    formData.append('date', form.date);\n    formData.append('picture', form.picture);\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    axios.post(`${apiEndPoint}/gallery`, formData, config).then(() => {\n      console.log(form);\n      alert('Picture sent !');\n    }).catch(error => {\n      if (error) {\n        console.log(error);\n        alert('Did you complete all inputs and choose a category ?');\n      }\n    });\n  };\n\n  useEffect(() => {\n    console.log(form);\n  }, [form]);\n  /* -------------------PREVIEW PICTURE------------------*/\n\n  const readURL = input => {\n    if (input.files && input.files[0]) {\n      const reader = new FileReader();\n\n      reader.onload = function (e) {\n        $('#blah').attr('src', e.target.result);\n      };\n\n      reader.readAsDataURL(input.files[0]);\n    }\n  };\n\n  $('#imgInp').change(function () {\n    readURL(this);\n  });\n  /* -------------------RETURN------------------*/\n\n  return React.createElement(\"div\", {\n    id: \"visitor\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Share your experience of Wild Circus\"), React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"Download your best photo of the show you assisted !\"), React.createElement(\"form\", {\n    id: \"form\",\n    runat: \"server\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Please fill all fields\"), React.createElement(\"input\", {\n    placeholder: \"Picture's title\",\n    onChange: event => setForm(_objectSpread({}, form, {\n      title: event.target.value\n    })),\n    maxLength: \"50\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), React.createElement(\"select\", {\n    onChange: event => setForm(_objectSpread({}, form, {\n      category: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    id: \"cat\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Category's picture\"), category.map(category => React.createElement(\"option\", {\n    value: category.id,\n    key: category.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, category.name)), \";\", React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"Other\")), React.createElement(\"input\", {\n    type: \"date\",\n    maxLength: \"8\",\n    onChange: event => setForm(_objectSpread({}, form, {\n      date: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    name: \"picture\",\n    onChange: event => setForm(_objectSpread({}, form, {\n      picture: event.target.files[0]\n    })),\n    type: \"file\",\n    maxLength: \"100\",\n    id: \"imgInp\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    id: \"blah\",\n    src: \"#\",\n    alt: \"fairegardersoncheval\",\n    className: !form.picture ? 'imgUnloaded' : 'imgLoaded',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: submitForm,\n    id: \"button_register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \"Send your picture\")));\n};\n\nexport default Visitor;","map":{"version":3,"sources":["/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/src/Components/Visitor.jsx"],"names":["React","useEffect","useState","apiEndPoint","axios","$","Visitor","category","setCategory","get","then","result","data","title","date","undefined","picture","form","setForm","submitForm","e","preventDefault","formData","FormData","append","config","headers","post","console","log","alert","catch","error","readURL","input","files","reader","FileReader","onload","attr","target","readAsDataURL","change","event","value","map","id","name"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { apiEndPoint } from '../config';\nimport './css/Visitor.css';\nimport axios from 'axios';\nimport $ from 'jquery';\n\nconst Visitor = () => {\n\n  /* -------------------GET CATEGORIES FROM API------------------*/\n\n  const [category, setCategory] = useState([]);\n\n  useEffect(() => {\n    axios.get(`${apiEndPoint}/category/`)\n      .then((result) => {\n        setCategory(result.data);\n      });\n  }, []);\n\n  /* -------------------POST ON API------------------*/\n\n  const [form, setForm] = useState({\n    category: '',\n    title: '',\n    date: undefined,\n    picture: null,\n  });\n\n  const submitForm = (e) => {\n    e.preventDefault();\n\n    const formData = new FormData();\n\n    formData.append('category_id', form.category);\n    formData.append('title', form.title);\n    formData.append('date', form.date);\n    formData.append('picture', form.picture);\n\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data',\n      },\n    };\n\n    axios.post(`${apiEndPoint}/gallery`, formData, config)\n      .then(() => {\n        console.log(form);\n        alert('Picture sent !')\n      })\n      .catch((error) => {\n        if (error) {\n          console.log(error)\n          alert('Did you complete all inputs and choose a category ?')\n        }\n      });\n  };\n\n  useEffect(() => {\n    console.log(form);\n  }, [form]);\n\n  /* -------------------PREVIEW PICTURE------------------*/\n\n  const readURL = (input) => {\n    if (input.files && input.files[0]) {\n      const reader = new FileReader();\n      reader.onload = function (e) {\n        $('#blah').attr('src', e.target.result);\n      };\n      reader.readAsDataURL(input.files[0]);\n    }\n  };\n  $('#imgInp').change(function () {\n    readURL(this);\n  });\n\n  /* -------------------RETURN------------------*/\n\n return (\n   <div id=\"visitor\">\n     <h1>Share your experience of Wild Circus</h1>\n     <h2>Download your best photo of the show you assisted !</h2>\n     <form id=\"form\" runat=\"server\">\n     <h3>Please fill all fields</h3>\n      <input\n        placeholder=\"Picture's title\"\n        onChange={(event) => setForm({ ...form, title: event.target.value })}\n        maxLength=\"50\">\n      </input>\n      <select\n        onChange={(event) => setForm({ ...form, category: event.target.value })}\n      >\n        <option id=\"cat\">Category's picture</option>\n        {category.map((category) => (\n          <option value={category.id} key={category.name}>{category.name}</option>\n        ))}\n        ;\n        <option>Other</option>\n      </select>\n      <input\n        type=\"date\"\n        maxLength=\"8\"\n        onChange={(event) => setForm({ ...form, date: event.target.value })}\n      >\n      </input>\n      <input\n        name=\"picture\"\n        onChange={(event) => setForm({ ...form, picture: event.target.files[0] })}\n        type=\"file\"\n        maxLength=\"100\"\n        id=\"imgInp\"\n        \n      >\n      </input>\n        <img id=\"blah\" src=\"#\" alt=\"fairegardersoncheval\" className={!form.picture ? 'imgUnloaded' : 'imgLoaded'} />\n      <button\n        type=\"submit\"\n        onClick={submitForm}\n        id=\"button_register\"\n      >\n        Send your picture\n      </button>\n     </form>\n   </div>\n )\n}\n\nexport default Visitor;"]},"metadata":{},"sourceType":"module"}