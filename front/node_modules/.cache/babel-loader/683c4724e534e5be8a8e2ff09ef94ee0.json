{"ast":null,"code":"import _slicedToArray from \"/home/violette/Bureau/projet3/FRONT_TRAVAIL_nantes-0919-js-CGouestre-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/violette/Bureau/projet3/FRONT_TRAVAIL_nantes-0919-js-CGouestre-front/src/Components/Adverts/Advert.jsx\";\nimport React, { useState, useEffect, Fragment, useContext } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEnvelope } from '@fortawesome/free-solid-svg-icons';\nimport Navbar from '../Navbar/Navbar';\nimport { CtxAdverts } from '../CtxAdverts';\nimport { apiEndPoint } from '../../config';\nimport '../css/Advert.css';\n\nconst Advert = props => {\n  const _useContext = useContext(CtxAdverts),\n        _useContext2 = _slicedToArray(_useContext, 2),\n        adverts = _useContext2[0],\n        setAdverts = _useContext2[1];\n\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        img = _useState2[0],\n        setImg = _useState2[1];\n\n  const handleMap = () => {\n    return adverts.filter(advert => {\n      return parseInt(props.match.params.id) === advert.id;\n    }).map(advert => {\n      return React.createElement(\"div\", {\n        className: \"card mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 20\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21\n        },\n        __self: this\n      }, \"Annonce n\\xB0\", advert.id), React.createElement(\"div\", {\n        className: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      }, advert.title), React.createElement(\"img\", {\n        className: \"card-img-top\",\n        src: advert.url_image !== '' ? `${apiEndPoint}/uploads/${advert.url_image}` : `${apiEndPoint}/uploads/default.jpg`,\n        alt: \"Image advert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"card-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      }, advert.description), advert.price > 0 ? React.createElement(\"p\", {\n        className: \"card-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }, advert.price, \" Euros\") : null, advert.phone > 0 ? React.createElement(\"p\", {\n        className: \"card-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      }, \"Tel: \", advert.phone) : null, React.createElement(\"p\", {\n        className: \"card-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33\n        },\n        __self: this\n      }, advert.location), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"mailto:\" + advert.email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }, \" \", React.createElement(\"button\", {\n        className: \"btn btn-success m-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }, \"Contacter \", advert.name, \" \", React.createElement(FontAwesomeIcon, {\n        icon: faEnvelope,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }))), React.createElement(\"button\", {\n        id: \"propose\",\n        type: \"button\",\n        className: \"btn btn-primary\",\n        onClick: print,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }, \" Imprimer\"))));\n    });\n  };\n\n  const print = () => {\n    return window.print();\n  }; // useEffect(() => {\n  //   if (advertImage != \"\") {\n  //     fetch(`${apiEndPoint}/image/${image}`)\n  //       .then((response, err) => {\n  //         if (err) {\n  //           throw err;\n  //         } else {\n  //           setImg(response.url);\n  //         }\n  //       });\n  //   } else {\n  //     fetch(`${apiEndPoint}/image/default.jpg`)\n  //       .then((response, err) => {\n  //         if (err) {\n  //           throw err;\n  //         } else {\n  //           setImg(response.url);\n  //         }\n  //       });\n  //   }\n  // }, []);\n\n\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(Navbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"advert\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, adverts.length > 0 ? handleMap() : React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Loading...\")));\n};\n\nexport default Advert;","map":{"version":3,"sources":["/home/violette/Bureau/projet3/FRONT_TRAVAIL_nantes-0919-js-CGouestre-front/src/Components/Adverts/Advert.jsx"],"names":["React","useState","useEffect","Fragment","useContext","FontAwesomeIcon","faEnvelope","Navbar","CtxAdverts","apiEndPoint","Advert","props","adverts","setAdverts","img","setImg","handleMap","filter","advert","parseInt","match","params","id","map","title","url_image","description","price","phone","location","email","name","print","window","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment, useContext } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEnvelope } from '@fortawesome/free-solid-svg-icons';\nimport Navbar from '../Navbar/Navbar';\nimport { CtxAdverts } from '../CtxAdverts';\nimport { apiEndPoint } from '../../config';\nimport '../css/Advert.css';\n\nconst Advert = (props) => {\n  const [adverts, setAdverts] = useContext(CtxAdverts);\n  const [img, setImg] = useState(\"\");\n\n\n  const handleMap = () => {\n    return adverts.filter((advert) => {\n      return parseInt(props.match.params.id) === advert.id\n    })\n      .map((advert) => {\n        return (\n          <div className=\"card mt-3\">\n            <p>Annonce nÂ°{advert.id}</p>\n            <div className=\"card-body\">\n              <h5 className=\"card-title\">{advert.title}</h5>\n              <img className=\"card-img-top\" src={\n                advert.url_image !== '' ?\n                `${apiEndPoint}/uploads/${advert.url_image}` :\n                `${apiEndPoint}/uploads/default.jpg`\n                } alt=\"Image advert\"\n              />\n              <p className=\"card-text\">{advert.description}</p>\n              {advert.price > 0 ? <p className=\"card-text\">{advert.price} Euros</p> : null}\n              {advert.phone > 0 ? <p className=\"card-text\">Tel: {advert.phone}</p> : null}\n              <p className=\"card-text\">{advert.location}</p>\n              <div>\n                <a href={\"mailto:\" + advert.email}> <button className=\"btn btn-success m-1\">Contacter {advert.name} <FontAwesomeIcon icon={faEnvelope} /></button></a>\n                <button id=\"propose\" type=\"button\" className=\"btn btn-primary\" onClick={print}> Imprimer</button>\n              </div>\n            </div>\n          </div>)\n      })\n  };\n\n  const print = () => {\n    return window.print();\n  }\n\n  // useEffect(() => {\n  //   if (advertImage != \"\") {\n  //     fetch(`${apiEndPoint}/image/${image}`)\n  //       .then((response, err) => {\n  //         if (err) {\n  //           throw err;\n  //         } else {\n  //           setImg(response.url);\n  //         }\n  //       });\n  //   } else {\n  //     fetch(`${apiEndPoint}/image/default.jpg`)\n  //       .then((response, err) => {\n  //         if (err) {\n  //           throw err;\n  //         } else {\n  //           setImg(response.url);\n  //         }\n  //       });\n  //   }\n  // }, []);\n\n  return (\n    <Fragment>\n      <Navbar />\n      <div id=\"advert\">\n        {adverts.length > 0\n          ? handleMap()\n          : <p>Loading...</p>\n        }\n      </div>\n    </Fragment>\n  );\n}\n\nexport default Advert;\n"]},"metadata":{},"sourceType":"module"}