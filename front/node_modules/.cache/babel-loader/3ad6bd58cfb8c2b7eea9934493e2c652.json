{"ast":null,"code":"import _objectSpread from \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/src/Components/Visitor.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { apiEndPoint } from '../config';\nimport './css/Visitor.css';\nimport axios from 'axios';\n\nconst Visitor = () => {\n  /* -------------------GET CATEGORIES FROM API------------------*/\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        category = _useState2[0],\n        setCategory = _useState2[1];\n\n  useEffect(() => {\n    axios.get(`${apiEndPoint}/category/`).then(result => {\n      setCategory(result.data);\n    });\n  }, []);\n  /* -------------------POST ON API------------------*/\n\n  const _useState3 = useState({\n    category: '',\n    title: '',\n    date: undefined,\n    picture: null\n  }),\n        _useState4 = _slicedToArray(_useState3, 2),\n        form = _useState4[0],\n        setForm = _useState4[1];\n\n  const submitForm = e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('category_id', form.category);\n    formData.append('title', form.title);\n    formData.append('date', form.date);\n    formData.append('picture', form.picture);\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    axios.post(`${apiEndPoint}/gallery`, formData, config).then(() => {\n      console.log(form);\n    }).catch(error => {\n      if (error) {\n        console.log(error);\n      }\n    });\n  };\n\n  useEffect(() => {\n    console.log(form);\n  }, [form]);\n  return React.createElement(\"div\", {\n    id: \"visitor\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Share your experience of Wild Circus\"), React.createElement(\"form\", {\n    id: \"form\",\n    runat: \"server\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    onChange: event => setForm(_objectSpread({}, form, {\n      category: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Category's picture\"), category.map(category => React.createElement(\"option\", {\n    value: category.id,\n    key: category.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, category.name)), \";\", React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Other\")), React.createElement(\"input\", {\n    placeholder: \"Picture's title\",\n    onChange: event => setForm(_objectSpread({}, form, {\n      title: event.target.value\n    })),\n    maxLength: \"100\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"date\",\n    maxLength: \"8\",\n    onChange: event => setForm(_objectSpread({}, form, {\n      date: event.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    name: \"picture\",\n    onChange: event => setForm(_objectSpread({}, form, {\n      picture: event.target.files[0]\n    })),\n    type: \"file\",\n    maxLength: \"100\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: submitForm,\n    id: \"button_register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"Send your picture\")));\n};\n\nexport default Visitor;","map":{"version":3,"sources":["/home/violette/Bureau/odyssey/checkpoint_04/FRONT_TRAVAIL_wildcircus2/src/Components/Visitor.jsx"],"names":["React","useEffect","useState","apiEndPoint","axios","Visitor","category","setCategory","get","then","result","data","title","date","undefined","picture","form","setForm","submitForm","e","preventDefault","formData","FormData","append","config","headers","post","console","log","catch","error","event","target","value","map","id","name","files"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimportÂ { apiEndPoint } from '../config';\nimport './css/Visitor.css';\nimport axios from 'axios';\n\nconst Visitor = () => {\n\n  /* -------------------GET CATEGORIES FROM API------------------*/\n\n  const [category, setCategory] = useState([]);\n\n  useEffect(() => {\n    axios.get(`${apiEndPoint}/category/`)\n      .then((result) => {\n        setCategory(result.data);\n      });\n  }, []);\n\n  /* -------------------POST ON API------------------*/\n\n  const [form, setForm] = useState({\n    category: '',\n    title: '',\n    date: undefined,\n    picture: null,\n  });\n\n  const submitForm = (e) => {\n    e.preventDefault();\n\n    const formData = new FormData();\n\n    formData.append('category_id', form.category);\n    formData.append('title', form.title);\n    formData.append('date', form.date);\n    formData.append('picture', form.picture);\n\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data',\n      },\n    };\n\n    axios.post(`${apiEndPoint}/gallery`, formData, config)\n      .then(() => {\n        console.log(form);\n      })\n      .catch((error) => {\n        if (error) {\n          console.log(error)\n        }\n      });\n  };\n\n  useEffect(() => {\n    console.log(form);\n  }, [form]);\n\n\n return (\n   <div id=\"visitor\">\n     <h1>Share your experience of Wild Circus</h1>\n     <form id=\"form\" runat=\"server\">\n      <select\n        onChange={(event) => setForm({ ...form, category: event.target.value })}\n      >\n        <option>Category's picture</option>\n        {category.map((category) => (\n          <option value={category.id} key={category.name}>{category.name}</option>\n        ))}\n        ;\n        <option>Other</option>\n      </select>\n      <input\n        placeholder=\"Picture's title\"\n        onChange={(event) => setForm({ ...form, title: event.target.value })}\n        maxLength=\"100\">\n      </input>\n      <input\n        type=\"date\"\n        maxLength=\"8\"\n        onChange={(event) => setForm({ ...form, date: event.target.value })}\n      >\n      </input>\n      <input\n        name=\"picture\"\n        onChange={(event) => setForm({ ...form, picture: event.target.files[0] })}\n        type=\"file\"\n        maxLength=\"100\"\n      >\n      </input>\n      <button\n        type=\"submit\"\n        onClick={submitForm}\n        id=\"button_register\"\n      >\n        Send your picture\n      </button>\n     </form>\n   </div>\n )\n}\n\nexport default Visitor;"]},"metadata":{},"sourceType":"module"}