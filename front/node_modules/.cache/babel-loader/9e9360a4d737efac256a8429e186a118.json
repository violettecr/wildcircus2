{"ast":null,"code":"import _slicedToArray from \"/home/violette/Bureau/projet3/FRONT_COPIE_nantes-0919-js-CGouestre-front (copie)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/violette/Bureau/projet3/FRONT_COPIE_nantes-0919-js-CGouestre-front (copie)/src/Components/Admin/AdminPage.jsx\";\nimport React, { Fragment, useContext, useEffect, useState } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Navbar from '../Navbar/Navbar';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrashAlt } from '@fortawesome/free-solid-svg-icons';\nimport { apiEndPoint } from '../../config';\nimport { CtxAdverts } from '../CtxAdverts';\nimport CtxAdmin from '../CtxAdmin';\nimport { Redirect, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport '../css/AdminPage.css';\n\nconst AdminPage = () => {\n  const _useContext = useContext(CtxAdverts),\n        _useContext2 = _slicedToArray(_useContext, 2),\n        adverts = _useContext2[0],\n        setAverts = _useContext2[1];\n\n  const _useContext3 = useContext(CtxAdmin),\n        _useContext4 = _slicedToArray(_useContext3, 2),\n        admin = _useContext4[0],\n        setAdmin = _useContext4[1];\n\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        id = _useState2[0],\n        setId = _useState2[1];\n\n  const disconnect = () => {\n    localStorage.removeItem('token');\n    window.location.reload(false);\n  };\n\n  const handleInput = e => {\n    setId(e.target.value);\n  };\n\n  const deleteAdvert = id => {\n    axios.delete(`${apiEndPoint}/advert/${id}`).then(res => setAverts(res.data));\n  };\n\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, !admin.name && React.createElement(Redirect, {\n    to: \"/adminLogin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }), React.createElement(Navbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"adminPage\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, \"Admin : \", admin.name), React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, \" Num\\xE9ro de l'annonce :\", React.createElement(\"input\", {\n    onChange: handleInput,\n    type: \"text\",\n    name: \"Num\\xE9ro de l'annonce\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  })), React.createElement(\"table\", {\n    className: \"table table-striped\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"Id\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"Title\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Description\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"Supprimer\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, adverts.filter(advert => {\n    console.log(advert);\n\n    if (id.length > 0) {\n      return advert.id === parseInt(id);\n    } else {\n      return advert;\n    }\n  }).map(advert => {\n    console.log(advert);\n    return React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, advert.id), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, advert.title), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, advert.description), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => deleteAdvert(advert.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faTrashAlt,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    })), \" \"));\n  }))), React.createElement(\"button\", {\n    onClick: disconnect,\n    id: \"disconect\",\n    type: \"button\",\n    className: \"btn btn-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/adminLogin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"Deconnexion\"))));\n};\n\nexport default AdminPage;","map":{"version":3,"sources":["/home/violette/Bureau/projet3/FRONT_COPIE_nantes-0919-js-CGouestre-front (copie)/src/Components/Admin/AdminPage.jsx"],"names":["React","Fragment","useContext","useEffect","useState","Navbar","FontAwesomeIcon","faTrashAlt","apiEndPoint","CtxAdverts","CtxAdmin","Redirect","Link","axios","AdminPage","adverts","setAverts","admin","setAdmin","id","setId","disconnect","localStorage","removeItem","window","location","reload","handleInput","e","target","value","deleteAdvert","delete","then","res","data","name","filter","advert","console","log","length","parseInt","map","title","description"],"mappings":"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","sourcesContent":["import React, {Fragment, useContext, useEffect, useState } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Navbar from '../Navbar/Navbar';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTrashAlt } from '@fortawesome/free-solid-svg-icons';\nimport { apiEndPoint } from '../../config';\nimport { CtxAdverts } from '../CtxAdverts';\nimport CtxAdmin from '../CtxAdmin';\nimport {Redirect, Link} from 'react-router-dom';\nimport axios from 'axios';\nimport '../css/AdminPage.css';\n\nconst AdminPage = () => {\nconst [adverts, setAverts] = useContext(CtxAdverts);\nconst [admin, setAdmin] = useContext(CtxAdmin);\nconst [id, setId] = useState(\"\");\n\n  const disconnect = () => {\n    localStorage.removeItem('token');\n    window.location.reload(false);\n  }\n\n  const handleInput= (e) => {\n    setId(e.target.value)\n  }\n\n  const deleteAdvert = id => {\n    axios.delete(`${apiEndPoint}/advert/${id}`)\n    .then(res => setAverts(res.data))\n  }\n  \n\treturn (\n    <Fragment>\n      {!admin.name && <Redirect to='/adminLogin'/>}\n      <Navbar/>\n      <div id=\"adminPage\">\n        <p>Admin : {admin.name}</p>\n        <label> Numéro de l'annonce :\n          <input onChange={handleInput} type=\"text\" name=\"Numéro de l'annonce\" />\n        </label>\n      \n\n      <table className=\"table table-striped\">\n  <thead>\n    <tr>\n      <th scope=\"col\">Id</th>\n      <th scope=\"col\">Title</th>\n      <th scope=\"col\">Description</th>\n      <th scope=\"col\">Supprimer</th>\n    </tr>\n  </thead>\n  <tbody>\n \n      {adverts.filter((advert) => {\n        console.log(advert)\n        if ( id.length > 0 ){\n          return advert.id === parseInt(id)\n        }else{\n          return advert\n        }        \n      })\n        .map((advert) => {\n          console.log(advert)\n          return(\n          <tr>\n            <td>{advert.id}</td>\n            <td>{advert.title}</td>\n            <td>{advert.description}</td> \n            <td><button  onClick={() => deleteAdvert(advert.id)}><FontAwesomeIcon icon={faTrashAlt}/></button> </td>     \n          </tr>\n          )})}\n    </tbody>\n  </table>\n\n  \n<button onClick={disconnect} id=\"disconect\" type=\"button\" className=\"btn btn-primary\">\n        <Link to=\"/adminLogin\">\n          Deconnexion\n          </Link>\n          </button>   \n          </div>   \n  </Fragment>    \n  \n          )};\n\nexport default AdminPage;\n\n\n\n"]},"metadata":{},"sourceType":"module"}